gen ChatMessage {
  @crdt(immutable) has id: String
  @crdt(peritext) has content: String
  @crdt(or_set) has reactions: Set<String>
  @crdt(pn_counter) has likes: i64
}

exegesis {
  A collaborative chat message with CRDT-based conflict resolution.

  - id: Immutable identifier set once at creation
  - content: Rich text with operational transformation for concurrent edits
  - reactions: Set of emoji reactions, add-wins semantics
  - likes: Distributed counter with commutativity
}
