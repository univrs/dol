gen ChatMessage {
  @crdt(immutable)
  has id: string

  @crdt(peritext, formatting="full")
  has content: string

  @crdt(or_set)
  has reactions: Set<string>

  @crdt(lww)
  has edited_at: Option<i64>
}

docs {
  A collaborative chat message with CRDT merge strategies.

  The id is immutable (set once, never changes).
  The content uses Peritext for collaborative rich text editing.
  Reactions use an OR-Set for add-wins semantics.
  The edit timestamp uses last-write-wins.
}
